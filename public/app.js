(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{43:function(t,e,s){t.exports=s(44)},44:function(t,e,s){"use strict";s.r(e);var r=s(0),a=s.n(r),i=s(5),n=s.n(i),o=s(1),c=s.n(o),h=s(3),l=s.n(h),u=s(18),p=s.n(u),d=s(4),m=s.n(d),b=(t=(()=>{}))=>e=>{var s,r;return r=s=class extends a.a.Component{constructor(...t){super(...t),c()(this,"state",this.usedState()),c()(this,"onStoreChange",()=>{this.setState(this.usedState())})}usedState(){return t(this.context.store,this.props)}componentDidMount(){this.subscriptionId=this.context.store.subscribe(this.onStoreChange)}componentWillUnmount(){this.context.store.unSubscribe(this.subscriptionId),this.subscriptionId=null}shouldComponentUpdate(t,e){return!m()(t,this.props)||!m()(e,this.state)}render(){return a.a.createElement(e,p()({},this.props,this.usedState(),{store:this.context.store}))}},c()(s,"displayName",`${e.name}Container`),c()(s,"contextTypes",{store:l.a.object}),r};const S={article:{paddingBottom:10,borderBottom:"1px solid #aaa",marginBottom:10},title:{fontWeight:"bold"},date:{fontSize:"0.85em",color:"#888"},author:{paddingTop:10,paddingBottom:10},body:{paddingLeft:20}};class g extends a.a.PureComponent{render(){const{store:t,article:e}=this.props;let s=t.lookupAuthor(e.authorId);return a.a.createElement("div",{style:S.article},a.a.createElement("div",{style:S.title},e.title),a.a.createElement("div",{style:S.date},(r=e.date,new Date(r).toDateString())),a.a.createElement("div",{style:S.author},a.a.createElement("a",{href:s.website},s.firstname," ",s.lastName)),a.a.createElement("div",{style:S.body},e.body));var r}}g.propTypes={article:l.a.shape({title:l.a.string.isRequired,date:l.a.string.isRequired,body:l.a.string.isRequired})};var y=b((t,e)=>({author:t.lookupAuthor(e.article.authorId)}))(g);class E extends a.a.PureComponent{render(){return a.a.createElement("div",null,Object.values(this.props.articles).map(t=>a.a.createElement(y,{key:t.id,article:t})))}}var v=b()(({store:t})=>{const[e,s]=Object(r.useState)(""),i=((t,e)=>{const[s,a]=Object(r.useState)(t);return Object(r.useEffect)(()=>{const s=setTimeout(()=>{a(t)},e);return()=>{clearTimeout(s)}},[t]),s})(e,500);Object(r.useEffect)(()=>{t.setSearchTerm(i)},[i,t]);return a.a.createElement("input",{type:"search",placeholder:"Enter search term",value:e,onChange:t=>{s(t.target.value)}})});class C extends a.a.Component{static dateDisplay(t){return t.toLocaleTimeString([],{hour12:!0,hour:"2-digit",minute:"2-digit"})}render(){return a.a.createElement("div",null,this.props.timestampDisplay)}}var I=b(t=>({timestampDisplay:C.dateDisplay(t.getState().timestamp)}))(C),T=s(6),x=s.n(T);class f extends a.a.Component{constructor(...t){super(...t),c()(this,"appState",()=>{const{articles:t,searchTerm:e}=this.props.store.getState();return{articles:t,searchTerm:e}}),c()(this,"state",this.appState()),c()(this,"onStoreChange",()=>{this.setState(this.appState())}),c()(this,"searchItems",()=>{let t=this.state.articles;const e=new RegExp(this.state.searchTerm,"i");return t=x()(t,t=>t.title.match(e)||t.body.match(e)),t})}getChildContext(){return{store:this.props.store}}componentDidMount(){this.subscriptionId=this.props.store.subscribe(this.onStoreChange),this.props.store.startClock()}componentWillUnmount(){this.props.store.unSubscribe(this.subscriptionId)}shouldComponentUpdate(t,e){return!m()(e.searchTerm,this.state.searchTerm)||!m()(e.articles,this.state.articles)}render(){let t=this.searchItems(this.state);return a.a.createElement(a.a.Fragment,null,a.a.createElement(I,null),a.a.createElement(v,null),a.a.createElement(E,{articles:t}))}}c()(f,"childContextTypes",{store:l.a.object});const w=new class{constructor(t){c()(this,"mapIntoObject",t=>t.reduce((t,e)=>(t[e.id]=e,t),{})),c()(this,"lookupAuthor",t=>this.data.authors[t]),c()(this,"getState",()=>this.data),c()(this,"subscribe",t=>(this.lastSubscriptionId++,this.subscriptions[this.lastSubscriptionId]=t,this.lastSubscriptionId)),c()(this,"unSubscribe",t=>{delete this.subscriptions[t]}),c()(this,"mergeWithState",t=>{this.data={...this.data,...t},this.notifySubscribers()}),c()(this,"setSearchTerm",t=>{this.mergeWithState({searchTerm:t})}),c()(this,"notifySubscribers",()=>{Object.values(this.subscriptions).forEach(t=>t())}),c()(this,"startClock",()=>{setInterval(()=>{this.mergeWithState({timestamp:new Date})},1e3)}),this.data={articles:this.mapIntoObject(t.articles),authors:this.mapIntoObject(t.authors),searchTerm:"",timestamp:new Date},this.subscriptions={},this.lastSubscriptionId=0}}(window.initialData);n.a.render(a.a.createElement(f,{store:w}),document.getElementById("root"))}},[[43,1,2]]]);